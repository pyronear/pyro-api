Table organizations {
  id int [pk, increment]
  name varchar(100) [not null, unique]
  telegram_id varchar
  slack_hook varchar
}

Table users {
  id int [pk, increment]
  organization_id int [not null]
  role varchar(50) [not null]
  login varchar(50) [not null, unique]
  hashed_password varchar(70) [not null]
  created_at timestamp [not null]
}

Table cameras {
  id int [pk, increment]
  organization_id int [not null]
  name varchar(100) [not null, unique]
  angle_of_view float [not null]
  elevation float [not null]
  lat float [not null]
  lon float [not null]
  is_trustable boolean [not null]
  last_active_at timestamp
  last_image text
  created_at timestamp [not null]
}

Table poses {
  id int [pk, increment]
  camera_id int [not null]
  azimuth float [not null]
  patrol_id varchar(100)
}

Table occlusion_masks {
  id int [pk, increment]
  pose_id int [not null]
  mask varchar(255) [not null]
  created_at timestamp [not null]
}

Table sequences {
  id int [pk, increment]
  camera_id int [not null]
  pose_id int
  azimuth float [not null]
  is_wildfire varchar(50)
  started_at timestamp [not null]
  last_seen_at timestamp [not null]
}

Table detections {
  id int [pk, increment]
  camera_id int [not null]
  pose_id int
  sequence_id int
  azimuth float [not null]
  bucket_key varchar [not null]
  bboxes text [not null]
  created_at timestamp [not null]
}

Table webhooks {
  id int [pk, increment]
  url varchar [not null, unique]
}

Ref: users.organization_id > organizations.id
Ref: cameras.organization_id > organizations.id
Ref: poses.camera_id > cameras.id

Ref: occlusion_masks.pose_id > poses.id

Ref: sequences.camera_id > cameras.id
Ref: sequences.pose_id > poses.id

Ref: detections.camera_id > cameras.id
Ref: detections.pose_id > poses.id
Ref: detections.sequence_id > sequences.id
